<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IMA Narasaraopet Annual Sports Meet 2025</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1>IMA Narasaraopet Annual Sports Meet 2025</h1>
    <h2>Organising Committee Executive</h2>
    <div class="executive">
      <p>Executive members will be listed soon as per updated data.</p>
    </div>
  </header>

  <main>
    <!-- Teams Section -->
    <section id="teams">
      <h2>Teams and Participants</h2>
      <!-- Team LGH -->
      <div class="team" id="LGH">
        <h3>LGH Team Participants</h3>
        <ul>
          <!-- List Members Here -->
          <li>Chenchireddy Malapati</li>
          <li>Dr. Kamireddy Sreenivasa Reddy</li>
          <li>Prathyusha Lanka</li>
          <!-- and so on... -->
        </ul>
      </div>
      <!-- Team MAX -->
      <div class="team" id="MAX">
        <h3>MAX Care Team Participants</h3>
        <ul>
          <li>Pallaki Venu Gopala Reddy</li>
          <li>Dr. Sivannarayana</li>
          <li>Dr. Nagasudhakara Reddy</li>
          <!-- and so on... -->
        </ul>
      </div>
      <!-- Team MGH -->
      <div class="team" id="MGH">
        <h3>MGH Team Participants</h3>
        <ul>
          <li>Pradeep Reddy</li>
          <li>Vellanki Suresh Kumar</li>
          <li>Dodda Venkatesh Kumar</li>
          <!-- and so on... -->
        </ul>
      </div>
    </section>

    <!-- Event Sections -->
    <section class="event" id="cricket-section">
      <h2>Cricket</h2>
      <div class="organisers">
        <h3>Organisers:</h3> Chenna Reddy, G Sudheer Bhargav Reddy, Ch. Ajay Reddy, M Gowtham
      </div>
      
      <div class="participants">
        <h3>Participants:</h3>
        <p id="cricket-part-placeholder" class="note">Will be updated soon after CSV upload.</p>
        <ul id="cricket-participants-list"></ul>
      </div>
      
      <div class="roaster">
        <h3>Event Roaster:</h3>
        <p id="cricket-roaster-placeholder" class="note">Will be updated soon after CSV upload.</p>
        <ul id="cricket-roaster-list"></ul>
      </div>

      <div class="results">
        <h3>Results:</h3>
        <p id="cricket-result-placeholder" class="note">Will be updated soon after CSV upload.</p>
        <ul id="cricket-result-list"></ul>
      </div>
    </section>

    <section class="event" id="volley-section">
      <h2>Volley Ball</h2>
      <div class="organisers">
        <h3>Organisers:</h3> G Jayabharath Reddy, N Prakash, R Vinod Kumar Reddy, Sivannarayana
      </div>
      
      <div class="participants">
        <h3>Participants:</h3>
        <p id="volley-part-placeholder" class="note">Will be updated soon after CSV upload.</p>
        <ul id="volley-participants-list"></ul>
      </div>
      
      <div class="roaster">
        <h3>Event Roaster:</h3>
        <p id="volley-roaster-placeholder" class="note">Will be updated soon after CSV upload.</p>
        <ul id="volley-roaster-list"></ul>
      </div>

      <div class="results">
        <h3>Results:</h3>
        <p id="volley-result-placeholder" class="note">Will be updated soon after CSV upload.</p>
        <ul id="volley-result-list"></ul>
      </div>
    </section>

    <!-- Repeat event structure for all other events (Badminton, Table Tennis, Chess, etc.) -->

  </main>

  <footer>
    <p>Â© 2025 IMA Narasaraopet Annual Sports Meet</p>
  </footer>

  <script>
    // Basic CSV parsing function: converts CSV text to array of arrays by row and col
    function parseCSVRows(csvText) {
      return csvText.trim().split(/\r?\n/).map(line => line.split(',').map(cell => cell.trim()));
    }

    // Update list element from array of strings or objects (single item assumed)
    function updateListFromArray(listId, items, itemIndex=0) {
      const list = document.getElementById(listId);
      list.innerHTML = '';
      items.forEach(row => {
        const li = document.createElement('li');
        if (Array.isArray(row)) {
          li.textContent = row[itemIndex];
        } else {
          li.textContent = row;
        }
        list.appendChild(li);
      });
    }

    // Fetch csv and update UI; if error show placeholder, else populate list(s)
    async function fetchAndUpdate(csvFilename, listId, placeholderId, options = {}) {
      const placeholder = document.getElementById(placeholderId);
      const list = document.getElementById(listId);
      try {
        const response = await fetch(csvFilename);
        if (!response.ok) throw new Error('File not found');
        const text = await response.text();
        const rows = parseCSVRows(text);

        // If options.multicolumn show formatted list else single column text
        if (options.multicolumn) {
          // Customize here per need (e.g. show two or three columns)
          list.innerHTML = '';
          rows.forEach(row => {
            const li = document.createElement('li');
            li.textContent = row.join(' - ');
            list.appendChild(li);
          });
        } else {
          updateListFromArray(listId, rows);
        }

        placeholder.style.display = 'none';
        list.style.display = 'block';
      } catch(error) {
        placeholder.style.display = 'block';
        list.style.display = 'none';
      }
    }

    // Map event sections with CSV files for participants, roaster, and results
    document.addEventListener('DOMContentLoaded', () => {
      // Cricket
      fetchAndUpdate('cricket_participants.csv', 'cricket-participants-list', 'cricket-part-placeholder');
      fetchAndUpdate('cricket_roaster.csv', 'cricket-roaster-list', 'cricket-roaster-placeholder');
      fetchAndUpdate('cricket_results.csv', 'cricket-result-list', 'cricket-result-placeholder', { multicolumn: true });

      // Volley Ball
      fetchAndUpdate('volley_participants.csv', 'volley-participants-list', 'volley-part-placeholder');
      fetchAndUpdate('volley_roaster.csv', 'volley-roaster-list', 'volley-roaster-placeholder');
      fetchAndUpdate('volley_results.csv', 'volley-result-list', 'volley-result-placeholder', { multicolumn: true });

      // Add similar calls for other events...
    });
  </script>
</body>
</html>
